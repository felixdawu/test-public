<div class="test" style="color: red">测试文本</div>
<script type="text/javascript">
    /*            $.post(
                    // "https://pluscare-medical.myshopify.com/api/2021-10/graphql.json",
                    // "https://47230517415.myshopify.com/api/2021-10/graphql.json",
                    "https://pluscaremedical.com/api/2021-10/graphql.json",
                    `{
                        products(first:5) {
                            edges {
                                node {
                                    id
                                }
                            }
                        }
                    }`,
                    function (data) {
                        var str = JSON.stringify(data)
                        $(".test").html(str)
                        console.log(data);
                    },
                    "json"
                );
                //该种方式无法成功，返回403*/
    /*            $.ajax({
                    // url: "https://47230517415.myshopify.com/api/2021-10/graphql.json",
                    url: "https://pluscaremedical.com/api/2021-10/graphql.json",
                    type: "POST",
                    data: `{ shop { name } }`,
                    processData: false,
                    headers: {
                        "Content-Type": "application/graphql",
                        "X-Shopify-Storefront-Access-Token": "9ec0d4d92b60f4ebcd8cd5f7eec5a77a"
                    },
                    success: function (data) {
                        console.log("成功：", data);
                    },
                    error: function (xhr) {
                        console.log("失败：", xhr);
                        alert("状态码：" + xhr.status);
                    }
                });
                //该种方式可以成功！*/
    /*            const query = `{ shop { name } }`;
                function apiCall(query) {
                    return fetch('https://pluscaremedical.com/api/2021-10/graphql.json',
                        { method: 'POST',
                            headers: { 'Content-Type': 'application/graphql',
                                // "Access-Control-Origin": "*",
                                // "Access-Control-Allow-Origin": "*",
                                'X-Shopify-Storefront-Access-Token': "9ec0d4d92b60f4ebcd8cd5f7eec5a77a"
                            },
                            "body": query })
                        .then(response => response.json()) }
                apiCall(query).then(response => { console.log(response) });
                //该种方式可以成功！*/

    /*            var variables = {
                                  "input": {
                                    "email": "felix@unimed.cn",
                                    "password": "0.123456"
                                  }
                                }*/
    var variables = {
        "input": {
            email: "felix@unimed.cn",
            password: "0.123456"
        }
    }
    /*            $.ajax({
                    // url: "https://pluscaremedical.com/api/2021-10/graphql.json",
                    url: "https://pluscare-medical.myshopify.com/api/2021-10/graphql.json",
                    type: "POST",
                    // data: `query { shop { name }, variables {"id": "123"}`,
                    // data: `query { customer(customerAccessToken:"ef7d05664e0ff6c27a68508d5ee6a36b") { displayName } }`,
                    data: JSON.stringify({ mutation, variables }),
                    // data: mutation,
                    processData: false,
                    headers: {
                        "Content-Type": "application/graphql",
                        "X-Shopify-Storefront-Access-Token": "9ec0d4d92b60f4ebcd8cd5f7eec5a77a"
                    },
                    success: function (res) {
                        console.log("成功：", res);
                    },
                    error: function (xhr) {
                        console.log("失败：", xhr);
                        alert("状态码：" + xhr.status);
                    }
                });
                //该种方式mutation无法成功解析*/

    /*            const response = fetch(
                    `https://pluscare-medical.myshopify.com/api/2021-10/graphql.json`,
                    {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/graphql",
                            "X-Shopify-Storefront-Access-Token": "9ec0d4d92b60f4ebcd8cd5f7eec5a77a"
                        },
                        body: JSON.stringify({ mutation, variables }),
                    },
                ).then((response) => response.json());
                console.log(response);
                //同样该种方式mutation无法成功解析*/

    function apiCall(query) {
        return fetch('https://pluscare-medical.myshopify.com/api/2021-10/graphql.json',
            { method: 'POST',
                headers: { 'Content-Type': 'application/graphql',
                    // "Access-Control-Allow-Origin": "*",
                    'X-Shopify-Storefront-Access-Token': "9ec0d4d92b60f4ebcd8cd5f7eec5a77a"
                },
                "body": query })
            .then(response => response.json()) }
    var query = JSON.stringify({ mutation, variables });
    apiCall(query).then(response => { console.log(response) });
</script>